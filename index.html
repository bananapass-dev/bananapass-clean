<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="description" content="BananaPass: concierge de experiencias únicas en México. Accede a itinerarios VIP, reservas y asistencia 24/7 por WhatsApp.">
  <meta name="theme-color" content="#FFDD57">
  <link rel="manifest" href="/manifest.json">
  <title>BananaPass – Concierge de experiencias en México</title>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "BananaPass",
    "url": "https://bananapass.com",
    "logo": "https://bananapass.com/logo.png",
    "description": "Concierge de experiencias únicas en México.",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Ciudad de México",
      "addressRegion": "CDMX",
      "addressCountry": "MX"
    }
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />

  <style>
    /* Reset & Root Variables */
    :root { --yellow:#FFDD57;--green:#25D366;--dark:#222;--light:#FAFAFA;--bg:var(--light);--text:#333;--gray:#f0f0f0;--radius:.5rem;--font-heading:'Montserrat',sans-serif;--font-body:'Open Sans',sans-serif;--transition:.3s; }
    [data-theme='dark']{--bg:#222;--text:#EEE;--gray:#333;}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;font-size:16px;}
    body{font-family:var(--font-body);background:var(--bg);color:var(--text);line-height:1.6;transition:background var(--transition),color var(--transition);}
    body.no-scroll { overflow: hidden; }
    a{color:inherit;text-decoration:none;}
    img,video{max-width:100%;height:auto;display:block;}

    /* Accessibility: Skip Link */
    .skip-link{position:absolute;top:-40px;left:0;background:#000;color:#fff;padding:8px;z-index:100;transition:top .3s;}
    .skip-link:focus{top:0;}
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

    /* UI Elements: Progress Bar */
    #progress{position:fixed;top:0;left:0;width:0;height:4px;background:var(--green);z-index:9999;transition:width .25s;}

    /* Navigation */
    nav{
        background:rgba(255,255,255,.8);
        -webkit-backdrop-filter:blur(10px);
        backdrop-filter:blur(10px);
        position:fixed;
        top:0;
        width:100%;
        z-index:1000;
        display:flex;
        justify-content:center;
        padding: 1rem 1.5rem; /* Aumentado padding */
        font-family:var(--font-body);
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        align-items: center;
    }
    [data-theme='dark'] nav{background:rgba(34,34,34,.8);}
    nav.navbar-scrolled {
        background-color: var(--bg);
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    [data-theme='dark'] nav.navbar-scrolled {
        background-color: var(--bg);
        box-shadow: 0 2px 10px rgba(0,0,0,0.3); /* Sombra más visible en tema oscuro */
    }

    .nav-container{
        max-width:1200px;
        width:100%;
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap: 1rem;
    }
    .nav-container .logo img { height: 35px; /* Ajusta la altura de tu logo */ vertical-align: middle; }

    .nav-links{
        display:flex;
        gap: 1.5rem; /* Aumentado gap */
        align-items: center;
    }
    .nav-links a{
        font-weight:600;
        transition:color var(--transition);
        position: relative;
        padding: 0.25rem 0;
    }
    .nav-links a::after { /* Efecto hover sutil */
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -2px; /* Un poco más abajo */
        left: 0;
        background-color: var(--green);
        transition: width 0.3s ease;
    }
    .nav-links a:hover::after { width: 100%; }
    .nav-links a:hover{ color: var(--text); } /* Evita cambio de color si no es necesario */
    [data-theme='dark'] .nav-links a:hover{ color: var(--light); }


    .nav-cta a{padding:.5rem 1rem;background:var(--green);color:var(--dark);border-radius:var(--radius);}

    /* Mobile Navigation Toggle */
    .nav-toggle {
        display: none; /* Oculto en desktop */
        flex-direction: column;
        justify-content: space-around;
        width: 2rem; height: 2rem;
        background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1002; /* Encima del menú móvil */
    }
    .nav-toggle span {
        width: 2rem; height: 0.25rem; background: var(--text); border-radius: 10px;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Transición con rebote */
        position: relative; transform-origin: 1px;
    }
    .nav-toggle.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .nav-toggle.active span:nth-child(2) { opacity: 0; transform: translateX(20px); }
    .nav-toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

    /* Mobile Navigation Links Panel */
    .nav-links-mobile {
        display: none; /* Oculto por defecto, gestionado por JS y @media */
        flex-direction: column; align-items: center; justify-content: center;
        position: fixed; top: 0; left: 0; width: 100%; height: 100vh; /* Fullscreen */
        background: var(--bg);
        transform: translateX(100%); /* Inicia fuera de la pantalla */
        transition: transform 0.35s ease-in-out;
        padding-top: 6rem; /* Espacio para la navbar fija */
        gap: 1.5rem; /* Espacio entre enlaces */
        z-index: 1001; /* Detrás del toggle, encima del contenido */
    }
    .nav-links-mobile.active {
        transform: translateX(0);
    }
    .nav-links-mobile a {
        font-size: 1.3rem; /* Más grande para móvil */
        font-weight: 600;
        color: var(--text);
        padding: 0.75rem 1.5rem;
        border-radius: var(--radius);
        transition: background-color 0.2s ease, color 0.2s ease;
    }
    .nav-links-mobile a:hover {
      background-color: var(--gray);
    }
    [data-theme='dark'] .nav-links-mobile a:hover {
      background-color: var(--gray); /* --gray en dark es #333 */
    }
    .nav-links-mobile .btn-primary { /* Estilo para el CTA en el menú móvil */
        padding: .75rem 1.5rem;
        background: var(--green);
        color: var(--dark) !important; /* Asegurar contraste, !important para sobreescribir hover si es necesario */
    }
     .nav-links-mobile .btn-primary:hover {
        background-color: var(--green); /* Mantener el color verde del botón */
        opacity: 0.9;
    }


    @media(max-width:1023px){
        .nav-links { display: none; } /* Ocultar links de escritorio */
        .nav-cta { display: none; } /* Ocultar CTA de escritorio (está en menú móvil) */
        .nav-toggle { display: flex; } /* Mostrar hamburguesa */
        .nav-links-mobile { display: flex; } /* Permitir que JS lo maneje, pero flex para contenido */
    }


    /* UI Elements: Theme Toggle */
    #theme-toggle{position:fixed;top:1rem;right:1rem;background:var(--gray);border:none;padding:.5rem;border-radius:50%;cursor:pointer;z-index:1001;transition:background var(--transition);}
    #theme-toggle:hover{background:var(--yellow);}

    /* Hero Section */
    #hero{min-height:80vh;background:url('assets/hero.jpg')center/cover fixed;display:flex;align-items:center;justify-content:center;position:relative;color:var(--light);text-align:center;padding: 2rem 1rem;}
    #hero::after{content:'';position:absolute;inset:0;background:rgba(0,0,0,.4);}
    #hero .content{position:relative;z-index:1;}
    #hero h1{font-family:var(--font-heading);font-size:clamp(2.5rem,6vw,4rem);margin-bottom:1rem;}
    #hero p{font-size:1.2rem;margin-bottom:2rem;}

    /* Utility Classes */
    .container{max-width:1200px;margin:0 auto;padding:0 1rem;}
    .btn{display:inline-block;font-weight:600;padding:.75rem 1.5rem;border-radius:var(--radius);transition:transform var(--transition),background var(--transition);cursor:pointer;text-align:center;}
    .btn-primary{background:var(--green);color:var(--dark);}
    .btn-secondary{background:transparent;border:2px solid var(--green);color:var(--green);}
    .btn:hover{transform:scale(1.05);}

    /* General Section Styling */
    section{padding:4rem 1rem;}
    h2{font-family:var(--font-heading);text-align:center;margin-bottom:2rem;font-size:clamp(1.8rem, 4vw, 2.5rem);}

    /* Animation: Reveal on Scroll */
    .reveal{opacity:0;transform:translateY(20px);transition:opacity .6s ease-out,transform .6s ease-out;}
    .reveal.visible{opacity:1;transform:none;}

    /* Benefits Section */
    #benefits .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:2rem;}
    .benefit-card{background:var(--gray);padding:2rem;border-radius:var(--radius);text-align:center;transition:transform var(--transition);}
    .benefit-card:hover{transform:translateY(-5px);}
    .benefit-card span{font-size:2.5rem;margin-bottom:.5rem;display:block;}

    /* How it works Section */
    #how-it-works ol{list-style:none;display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;counter-reset:step;}
    #how-it-works li{background:var(--gray);flex:1;min-width:200px;padding:2rem;border-radius:var(--radius);position:relative;counter-increment:step;}
    #how-it-works li::before{content:counter(step);position:absolute;top:-1.5rem;left:-1.5rem;width:2.5rem;height:2.5rem;background:var(--green);color:var(--light);display:flex;align-items:center;justify-content:center;border-radius:50%;font-weight:600;}

    /* Plans Section */
    .table-responsive{overflow-x:auto;margin-bottom:2rem;}
    .plans-table{width:100%;border-collapse:collapse;text-align:center;}
    .plans-table th,.plans-table td{border:1px solid #ddd;padding:1rem;}
    .plans-table th{background:var(--yellow);font-family:var(--font-heading);}

    /* Carousel (Testimonials) */
    .swiper{width:100%;padding:2rem 0;}
    .swiper-slide{background:var(--gray);padding:2rem;border-radius:var(--radius);display:flex;flex-direction:column;align-items:center; text-align:center;}

    /* Blog Section */
    #blog .posts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;}
    .post-card{background:var(--gray);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column;}
    .post-card img{width:100%;height:160px;object-fit:cover;}
    .post-card .post-content{padding:1rem;flex:1;display:flex;flex-direction:column;}
    .post-card h3{margin-bottom:.5rem;font-family:var(--font-heading);}
    .post-card p{flex:1;margin-bottom:1rem;}
    .post-card a{align-self:flex-start;color:var(--green);font-weight:600;}

    /* Newsletter Section */
    #newsletter form{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;align-items:center;}
    #newsletter input[type=email]{padding:.75rem;border:1px solid #ccc;border-radius:var(--radius);flex:1;min-width:250px;}

    /* Contact Form Section */
    #contact form{display:flex;flex-direction:column;gap:1rem;max-width:600px; margin:0 auto;}
    #contact input,#contact textarea{padding:.75rem;border:1px solid #ccc;border-radius:var(--radius);transition:border var(--transition);font-family:var(--font-body);font-size:1rem;}
    #contact input:focus,#contact textarea:focus{border-color:var(--green);outline:none;}

    /* Custom Experience Form Section */
    #custom-experience form {display:flex;flex-direction:column;gap:1.5rem;max-width:800px;margin:0 auto;}
    #custom-experience .form-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:1.5rem;} /* minmax ajustado y gap */
    #custom-experience .form-grid > div { /* Contenedor de label + input */
        display: flex;
        flex-direction: column; /* Etiqueta arriba, input abajo */
        gap: 0.3rem; /* Pequeño espacio entre label e input */
    }
    #custom-experience label {display:block;margin-bottom:0;font-weight:600;color:var(--text);} /* Quitado margin-bottom, ahora usa gap del padre */
    #custom-experience input[type="text"],
    #custom-experience input[type="email"],
    #custom-experience input[type="tel"],
    #custom-experience input[type="number"],
    #custom-experience select,
    #custom-experience textarea {
        width:100%;padding:.75rem;border:1px solid #ccc;border-radius:var(--radius);transition:border var(--transition);font-family:var(--font-body);font-size:1rem;background-color: var(--bg); color: var(--text);}
    #custom-experience input:focus,
    #custom-experience select:focus,
    #custom-experience textarea:focus {border-color:var(--green);outline:none;}
    #custom-experience button[type="submit"] {align-self:center;margin-top:1rem;}
    #custom-experience p.form-instructions {text-align:center; margin-bottom: 2rem; font-size: 1.1rem;}


    /* Map Section (CSS only, no HTML in current structure) */
    #map iframe{width:100%;height:300px;border:0;border-radius:var(--radius);margin-bottom:2rem;}

    /* FAQ Section */
    #faq .faq-item{border-bottom:1px solid #ddd;}
    #faq .faq-item:last-child{border-bottom:none;}
    .faq-question{width:100%;padding:1rem;background:transparent;border:none;text-align:left;cursor:pointer;position:relative;font-weight:600;font-size:1.1rem;color:var(--text);}
    .faq-question::after{content:'+';position:absolute;right:1rem;top:50%;transform:translateY(-50%);transition:transform .3s;font-size:1.5rem;color:var(--green);}
    .faq-item.active .faq-question::after{transform:translateY(-50%) rotate(45deg);}
    .faq-answer{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out;padding:0 1rem;}
    .faq-item.active .faq-answer{max-height:250px;padding:1rem;} /* Max-height aumentado */
    .faq-answer p {margin-bottom: 0;}

    /* Cookies Banner */
    #cookie-banner{position:fixed;bottom:0;width:100%;background:var(--gray);padding:1rem;display:flex;justify-content:space-between;align-items:center;transform:translateY(100%);transition:transform .5s;z-index:2000;}
    #cookie-banner.visible{transform:translateY(0);}
    #cookie-banner span {margin-right: 1rem;}

    /* Footer */
    footer{text-align:center;font-size:.9rem;color:#666;background:#f4f4f4;padding:2rem 1rem;}
    [data-theme='dark'] footer {background: #1a1a1a; color: #aaa;}
    [data-theme='dark'] footer a {color: var(--yellow);}


    @media(max-width:600px){
      #hero{min-height:70vh;}
      #hero h1{font-size:2rem;}
      #hero p{font-size:1rem;}
      section{padding:3rem 1rem;}
      #custom-experience .form-grid {grid-template-columns:1fr;}
      #cookie-banner { flex-direction: column; gap: 0.5rem; text-align: center;}
    }
  </style>
</head>
<body data-theme="light">
  <a href="#main-content" class="skip-link">Saltar al contenido</a>
  <div id="progress" aria-hidden="true"></div>
  <button id="theme-toggle" aria-label="Alternar tema oscuro/claro">🌙</button>

  <nav id="navbar" aria-label="Barra de navegación principal">
    <div class="nav-container">
      <a href="#hero" class="logo" aria-label="BananaPass Inicio">
        <img src="https://bananapass.com/logo.png" alt="BananaPass Logo">
      </a>
      <div class="nav-links"> <a href="#benefits">Beneficios</a>
        <a href="#how-it-works">Cómo Funciona</a>
        <a href="#custom-experience">Diseña tu Viaje</a>
        <a href="#plans">Planes</a>
        <a href="#testimonials">Testimonios</a>
        <a href="#blog">Blog</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contacto</a>
      </div>
      <div class="nav-cta"> <a href="https://wa.me/525543800343" class="btn btn-primary" aria-label="Chatear en WhatsApp con BananaPass" target="_blank" rel="noopener noreferrer">Chat</a>
      </div>
      <button class="nav-toggle" aria-label="Abrir menú de navegación" aria-expanded="false" aria-controls="nav-links-mobile">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div class="nav-links-mobile" id="nav-links-mobile"> <a href="#benefits">Beneficios</a>
        <a href="#how-it-works">Cómo Funciona</a>
        <a href="#custom-experience">Diseña tu Viaje</a>
        <a href="#plans">Planes</a>
        <a href="#testimonials">Testimonios</a>
        <a href="#blog">Blog</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contacto</a>
        <a href="https://wa.me/525543800343" class="btn btn-primary" aria-label="Chatear en WhatsApp con BananaPass" target="_blank" rel="noopener noreferrer">Chat WhatsApp</a>
    </div>
  </nav>

  <main id="main-content">
    <header id="hero">
      <div class="content reveal">
        <h1>Tu amigo local en México 🍌🤝</h1>
        <p>Tu pase directo a experiencias únicas. Chatea ya en WhatsApp.</p>
        <a href="https://wa.me/525543800343" class="btn btn-primary" target="_blank" rel="noopener noreferrer">Chatea ya en WhatsApp</a>
      </div>
    </header>

    <section id="benefits" class="reveal">
      <div class="container">
        <h2>¿Por qué elegir BananaPass?</h2>
        <div class="grid">
          <div class="benefit-card reveal"><span aria-hidden="true">⏰</span><h3>Acompañamiento 24/7</h3><p>Siempre hay un concierge listo para ayudarte.</p></div>
          <div class="benefit-card reveal"><span aria-hidden="true">🌟</span><h3>Experiencias únicas</h3><p>Accede a actividades que nadie más ofrece.</p></div>
          <div class="benefit-card reveal"><span aria-hidden="true">😌</span><h3>Sin estrés</h3><p>Tú relájate, nosotros nos encargamos de todo.</p></div>
        </div>
      </div>
    </section>

    <section id="how-it-works" class="reveal">
      <div class="container">
        <h2>¿Cómo funciona?</h2>
        <ol>
          <li class="reveal"><h4>Chatea con nosotros</h4><p>Inicia la conversación en WhatsApp.</p></li>
          <li class="reveal"><h4>Personaliza tu itinerario</h4><p>Cuéntanos tus ideas y preferencias.</p></li>
          <li class="reveal"><h4>Reservamos por ti</h4><p>Nos encargamos de todos los detalles.</p></li>
          <li class="reveal"><h4>¡Disfruta!</h4><p>Vive una experiencia inolvidable.</p></li>
        </ol>
      </div>
    </section>

    <section id="custom-experience" class="reveal">
        <div class="container">
            <h2>Diseña tu Experiencia Única</h2>
            <p class="form-instructions">Cuéntanos qué tienes en mente y crearemos un viaje inolvidable para ti en México.</p>
            <form id="experience-form" novalidate>
                <div class="form-grid">
                    <div>
                        <label for="exp-name">Nombre Completo:</label>
                        <input type="text" id="exp-name" name="name" placeholder="Tu nombre completo" required aria-required="true">
                    </div>
                    <div>
                        <label for="exp-email">Correo Electrónico:</label>
                        <input type="email" id="exp-email" name="email" placeholder="Tu email de contacto" required aria-required="true">
                    </div>
                    <div>
                        <label for="exp-phone">Teléfono/WhatsApp (Opcional):</label> <input type="tel" id="exp-phone" name="phone" placeholder="+52 55 1234 5678">
                    </div>
                    <div>
                        <label for="exp-destination">Destino(s) de Interés en México:</label>
                        <input type="text" id="exp-destination" name="destination" placeholder="Ej: Riviera Maya, CDMX, Oaxaca" required aria-required="true">
                    </div>
                    <div>
                        <label for="exp-travelers">Número de Viajeros:</label>
                        <input type="number" id="exp-travelers" name="travelers" min="1" value="1" placeholder="1" required aria-required="true">
                    </div>
                    <div>
                        <label for="exp-dates">Fechas Estimadas de Viaje:</label>
                        <input type="text" id="exp-dates" name="dates" placeholder="Ej: Marzo 2026, Fin de semana largo de Noviembre">
                    </div>
                </div>
                <div>
                    <label for="exp-type">Tipo de Experiencia Principal:</label>
                    <select id="exp-type" name="experience_type" required aria-required="true">
                        <option value="" disabled selected>Selecciona una opción...</option>
                        <option value="aventura">Aventura y Naturaleza (ej. selva, cenotes, montañas)</option>
                        <option value="cultural">Cultural y Gastronómica (ej. ruinas, museos, tours de comida)</option>
                        <option value="relax">Relax y Bienestar (ej. spa, yoga, playas tranquilas)</option>
                        <option value="romantica">Romántica (ej. cenas especiales, hoteles boutique)</option>
                        <option value="lujo">Lujo y Exclusividad (ej. yates, villas privadas, chefs)</option>
                        <option value="eventos">Eventos Especiales (ej. bodas, festivales, conciertos)</option>
                        <option value="otra">Otra (describe abajo)</option>
                    </select>
                </div>
                <div>
                    <label for="exp-details">Cuéntanos más sobre tu experiencia ideal:</label>
                    <textarea id="exp-details" name="details" rows="5" placeholder="Describe qué te gustaría hacer, ver, tus intereses especiales, presupuesto aproximado (opcional), o cualquier otro detalle importante..." required aria-required="true"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Solicitar Cotización de Experiencia</button>
                <p id="exp-form-status" style="color:var(--green);display:none;margin-top:1rem;text-align:center;">¡Solicitud enviada! Te contactaremos pronto para diseñar tu aventura.</p>
            </form>
        </div>
    </section>

    <section id="plans" class="reveal">
      <div class="container">
        <h2>Nuestros Planes</h2>
        <div class="table-responsive"><table class="plans-table"><thead><tr><th>Característica</th><th>Básico<br><small>USD 150/14d</small></th><th>Premium<br><small>USD 300/14d</small></th></tr></thead><tbody><tr><td>Itinerarios a medida</td><td>✔️</td><td>✔️</td></tr><tr><td>Reservas VIP</td><td>❌</td><td>✔️</td></tr><tr><td>Soporte 24/7 por WhatsApp</td><td>✔️</td><td>✔️</td></tr><tr><td>Promociones</td><td>✔️</td><td>✔️ + exclusivas</td></tr></tbody></table></div>
        <div style="text-align:center; display:flex; justify-content:center; gap:1rem; flex-wrap:wrap;">
            <a class="btn btn-secondary" href="https://wa.me/525543800343?text=Hola,%20me%20interesa%20el%20plan%20Básico" target="_blank" rel="noopener noreferrer">Elegir Básico</a>
            <a class="btn btn-primary" href="https://wa.me/525543800343?text=Hola,%20me%20interesa%20el%20plan%20Premium" target="_blank" rel="noopener noreferrer">Elegir Premium</a>
        </div>
      </div>
    </section>

    <section id="testimonials" class="reveal">
      <div class="container">
        <h2>Testimonios</h2>
        <div class="swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><blockquote>"BananaPass me salvó el viaje: todo fue perfecto. La atención personalizada es de otro nivel."</blockquote><p><strong>Ana Pérez</strong></p></div>
                <div class="swiper-slide"><blockquote>"Reservas VIP y atención en minutos. ¡Increíble! Consiguieron lugares que estaban 'agotados'."</blockquote><p><strong>John Smith</strong></p></div>
                <div class="swiper-slide"><blockquote>"El mejor concierge para México. Conocen todos los secretos locales. Súper recomendado."</blockquote><p><strong>Lucía Méndez</strong></p></div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
      </div>
    </section>

    <section id="blog" class="reveal">
      <div class="container">
        <h2>Desde nuestro Blog</h2>
        <div class="posts-grid" id="posts-grid">
          </div>
        <div style="text-align:center;margin-top:2rem;"><a href="/blog" class="btn btn-primary">Ver blog completo</a></div>
      </div>
    </section>

    <section id="newsletter" class="reveal" style="background-color: var(--gray); padding: 3rem 1rem;">
        <div class="container">
            <h2 style="margin-bottom: 1rem;">Únete a nuestra Newsletter</h2>
            <p style="text-align:center; margin-bottom: 1.5rem;">Recibe tips de viaje exclusivos, ofertas y las últimas novedades sobre experiencias en México.</p>
            <form id="newsletter-form">
                <label for="newsletter-email" class="sr-only">Tu correo electrónico</label>
                <input type="email" id="newsletter-email" name="email" placeholder="Tu email" required aria-required="true" aria-label="Correo electrónico para newsletter">
                <button class="btn btn-primary" type="submit">Suscribirme</button>
            </form>
            <p id="newsletter-status" style="color:var(--green);display:none;margin-top:1rem;text-align:center;">¡Gracias por suscribirte!</p>
        </div>
    </section>

    <section id="faq" class="reveal">
      <div class="container">
        <h2>Preguntas Frecuentes</h2>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" aria-controls="faq1-answer">¿Cómo puedo reservar una experiencia o plan?</button>
            <div class="faq-answer" id="faq1-answer"><p>¡Es muy fácil! Simplemente inicia una conversación con nosotros por WhatsApp a través de cualquiera de los botones de "Chat" o "Elegir Plan" en la página. También puedes usar el formulario "Diseña tu Experiencia" y nos pondremos en contacto contigo.</p></div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" aria-controls="faq2-answer">¿Qué tipo de experiencias ofrecen?</button>
            <div class="faq-answer" id="faq2-answer"><p>Ofrecemos una amplia gama de experiencias: desde aventuras en la naturaleza, tours culturales y gastronómicos, hasta momentos de relax y bienestar, escapadas románticas y acceso a eventos exclusivos. Si tienes algo específico en mente, ¡dínoslo! Nos encanta crear itinerarios 100% personalizados.</p></div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" aria-controls="faq3-answer">¿En qué destinos de México operan?</button>
            <div class="faq-answer" id="faq3-answer"><p>Operamos en todo México. Tenemos contactos y conocimiento local en los principales destinos turísticos como Cancún, Riviera Maya, Ciudad de México, Los Cabos, Puerto Vallarta, San Miguel de Allende, Oaxaca, y muchos más, incluyendo joyas ocultas.</p></div>
        </div>
         <div class="faq-item">
            <button class="faq-question" aria-expanded="false" aria-controls="faq4-answer">¿El costo de las actividades está incluido en los planes?</button>
            <div class="faq-answer" id="faq4-answer"><p>Nuestros planes (Básico y Premium) cubren el servicio de concierge: planificación de itinerarios, recomendaciones, reservas y soporte 24/7. Los costos de las actividades, tours, alojamiento, transporte, etc., son aparte y se cotizan según tus selecciones. Te ayudamos a conseguir las mejores tarifas y opciones.</p></div>
        </div>
      </div>
    </section>

    <section id="contact" class="reveal">
      <div class="container">
        <h2>Contáctanos</h2>
        <form id="contact-form" novalidate>
          <label for="name" class="sr-only">Nombre</label>
          <input type="text" id="name" name="name" placeholder="Tu nombre" required aria-required="true">
          <label for="email" class="sr-only">Email</label>
          <input type="email" id="email" name="email" placeholder="Tu email" required aria-required="true">
          <label for="message" class="sr-only">Mensaje</label>
          <textarea id="message" name="message" rows="5" placeholder="Tu mensaje" required aria-required="true"></textarea>
          <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
          <p id="form-status" style="color:var(--green);display:none;margin-top:1rem;text-align:center;">¡Mensaje enviado! Te responderemos pronto.</p>
        </form>
      </div>
    </section>
  </main>

  <div id="cookie-banner">
    <span>Usamos cookies para mejorar tu experiencia en BananaPass. Al continuar navegando, aceptas su uso.</span>
    <button id="accept-cookie" class="btn btn-primary">Aceptar</button>
  </div>

  <footer>
    <div class="container">
      <p>&copy; <span id="current-year">2025</span> BananaPass. Todos los derechos reservados.</p>
      <p><a href="/politica-de-privacidad">Política de privacidad</a> | <a href="/terminos-y-condiciones">Términos y Condiciones</a></p>
    </div>
  </footer>

  <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js" defer></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script> <script defer>
    // Google Analytics
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXX'); // REEMPLAZA G-XXXXXXX

    // Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => console.log('Service Worker registrado con éxito:', registration))
        .catch(error => console.log('Error al registrar Service Worker:', error));
    }

    // Scroll Progress Bar
    const progress = document.getElementById('progress');
    if (progress) {
        window.addEventListener('scroll', () => {
            const scroll = document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            progress.style.width = height ? (scroll / height) * 100 + '%' : '0';
        });
    }
    
    // Navbar scroll effect
    const nav = document.getElementById('navbar');
    if (nav) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                nav.classList.add('navbar-scrolled');
            } else {
                nav.classList.remove('navbar-scrolled');
            }
        });
    }

    // Mobile Nav Toggle
    const navToggle = document.querySelector('.nav-toggle');
    const mobileNavLinks = document.querySelector('.nav-links-mobile');
    if (navToggle && mobileNavLinks) {
        navToggle.addEventListener('click', () => {
            const isActive = navToggle.classList.toggle('active');
            mobileNavLinks.classList.toggle('active');
            navToggle.setAttribute('aria-expanded', isActive);
            document.body.classList.toggle('no-scroll', isActive);
        });
        // Cerrar menú al hacer clic en un enlace
        mobileNavLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navToggle.classList.remove('active');
                mobileNavLinks.classList.remove('active');
                navToggle.setAttribute('aria-expanded', 'false');
                document.body.classList.remove('no-scroll');
            });
        });
    }


    // Reveal on scroll
    const revealElements = document.querySelectorAll('.reveal');
    if (revealElements.length > 0) {
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        revealElements.forEach(el => observer.observe(el));
    }

    // Swiper Carousel
    if (typeof Swiper !== 'undefined') {
        new Swiper('.swiper', {
            loop: true,
            slidesPerView: 1,
            spaceBetween: 20,
            pagination: { el: '.swiper-pagination', clickable: true },
            autoplay: { delay: 5000, disableOnInteraction: false, },
            breakpoints: {
                768: { slidesPerView: 2, spaceBetween: 30, }
            }
        });
    }

    // Theme Toggle
    const themeToggleBtn = document.getElementById('theme-toggle');
    const rootHtml = document.documentElement;
    if (themeToggleBtn && rootHtml) {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            rootHtml.setAttribute('data-theme', savedTheme);
            themeToggleBtn.textContent = savedTheme === 'light' ? '🌙' : '☀️';
        }
        themeToggleBtn.addEventListener('click', () => {
            const currentTheme = rootHtml.getAttribute('data-theme') || 'light';
            const nextTheme = currentTheme === 'light' ? 'dark' : 'light';
            rootHtml.setAttribute('data-theme', nextTheme);
            themeToggleBtn.textContent = nextTheme === 'light' ? '🌙' : '☀️';
            localStorage.setItem('theme', nextTheme);
        });
    }

    // Smooth Scroll for nav links (solo para los de la navbar principal, los del menú móvil ya se cierran)
    document.querySelectorAll('#navbar .nav-container .nav-links a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // Cookie Banner
    const cookieBanner = document.getElementById('cookie-banner');
    const acceptCookieBtn = document.getElementById('accept-cookie');
    if (cookieBanner && acceptCookieBtn) {
        if (!localStorage.getItem('cookieConsent')) {
            cookieBanner.classList.add('visible');
        }
        acceptCookieBtn.addEventListener('click', () => {
            localStorage.setItem('cookieConsent', 'true');
            cookieBanner.classList.remove('visible');
        });
    }

    // Contact Form Submission
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', e => {
            e.preventDefault();
            const formStatus = document.getElementById('form-status');
            if (formStatus) {
                formStatus.textContent = '¡Mensaje enviado! Te responderemos pronto.';
                formStatus.style.display = 'block';
                setTimeout(() => { formStatus.style.display = 'none'; }, 4000);
            }
            e.target.reset();
        });
    }

    // Custom Experience Form Submission
    const experienceForm = document.getElementById('experience-form');
    if (experienceForm) {
        experienceForm.addEventListener('submit', e => {
            e.preventDefault();
            const expFormStatus = document.getElementById('exp-form-status');
            if (expFormStatus) {
                expFormStatus.textContent = '¡Solicitud enviada! Te contactaremos pronto para diseñar tu aventura.';
                expFormStatus.style.display = 'block';
                setTimeout(() => { expFormStatus.style.display = 'none'; }, 5000);
            }
            e.target.reset();
        });
    }
    
    // Newsletter Form Submission
    const newsletterForm = document.getElementById('newsletter-form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', e => {
            e.preventDefault();
            const newsletterStatus = document.getElementById('newsletter-status');
            if (newsletterStatus) {
                newsletterStatus.textContent = '¡Gracias por suscribirte!';
                newsletterStatus.style.display = 'block';
                setTimeout(() => { newsletterStatus.style.display = 'none'; }, 3000);
            }
            e.target.reset();
        });
    }

    // Fetch blog posts
    const postsGrid = document.getElementById('posts-grid');
    if (postsGrid) {
        fetch('/api/posts?limit=3')
            .then(res => {
                if (!res.ok) throw new Error('Error al cargar posts del blog. Estado: ' + res.status);
                return res.json();
            })
            .then(posts => {
                if (posts && posts.length > 0) {
                    postsGrid.innerHTML = ''; // Limpiar por si acaso
                    posts.forEach(p => {
                        const card = document.createElement('div');
                        card.className = 'post-card reveal';
                        card.innerHTML = `
                          <img src="${p.image || 'assets/placeholder-post.jpg'}" alt="${p.title || 'Entrada de blog'}">
                          <div class="post-content">
                            <h3>${p.title || 'Título no disponible'}</h3>
                            <p>${p.excerpt || 'Extracto no disponible.'}</p>
                            <a href="/blog/${p.slug || '#'}" class="btn btn-secondary" style="align-self: flex-start; padding: 0.5rem 1rem;">Leer más</a>
                          </div>`;
                        postsGrid.appendChild(card);
                    });
                } else {
                    postsGrid.innerHTML = '<p>No hay posts recientes en el blog.</p>';
                }
                const newRevealElements = postsGrid.querySelectorAll('.reveal');
                if (newRevealElements.length > 0 && typeof IntersectionObserver !== 'undefined') {
                    const tempObserver = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('visible');
                                tempObserver.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1 });
                    newRevealElements.forEach(el => tempObserver.observe(el));
                }
            })
            .catch(error => {
                console.error('Error cargando posts del blog:', error);
                postsGrid.innerHTML = '<p>No se pudieron cargar las entradas del blog. Intenta más tarde.</p>';
            });
    }

    // FAQ Accordion
    document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', () => {
            const faqItem = button.parentElement;
            const answer = button.nextElementSibling;
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            
            // Si quieres que solo un FAQ esté abierto a la vez, descomenta lo siguiente:
            // document.querySelectorAll('.faq-item.active').forEach(openItem => {
            //    if (openItem !== faqItem) {
            //        openItem.classList.remove('active');
            //        openItem.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
            //        openItem.querySelector('.faq-answer').style.maxHeight = null;
            //    }
            // });

            faqItem.classList.toggle('active');
            button.setAttribute('aria-expanded', !isExpanded);
            if (!isExpanded) {
                answer.style.maxHeight = answer.scrollHeight + "px";
            } else {
                answer.style.maxHeight = null;
            }
        });
    });

    // Update footer year
    const currentYearSpan = document.getElementById('current-year');
    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }

  </script>
</body>
</html>
